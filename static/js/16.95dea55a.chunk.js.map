{"version":3,"sources":["views/app-views/EditProfile.js"],"names":["EditProfile","avatarEndpoint","state","name","email","username","phone","website","address","city","getDataLoading","sendDataLoading","formRef","React","createRef","fetchUser","id","a","setState","fetch","response","json","data","current","setFieldsValue","console","log","img","callback","reader","FileReader","addEventListener","result","readAsDataURL","this","props","match","params","style","display","alignItems","justifyContent","mobileFlex","className","size","src","undefined","icon","onChange","info","key","file","status","getBase64","originFileObj","imageUrl","avatarUrl","message","success","content","duration","loading","showUploadList","action","type","onClick","layout","onFinish","values","setTimeout","userName","dateOfBirth","phoneNumber","postcode","initialValues","ref","onFinishFailed","errorInfo","xs","sm","md","lg","gutter","ROW_GUTTER","Item","label","rules","required","htmlType","disabled","history","push","APP_PREFIX_PATH","Component"],"mappings":"8VAiBaA,EAAb,4MACEC,eAAiB,mDADnB,EAGEC,MAAQ,CACNC,KAAM,GACNC,MAAO,GACPC,SAAU,GACVC,MAAO,GACPC,QAAS,GACTC,QAAS,GACTC,KAAM,GACNC,gBAAgB,EAChBC,iBAAiB,GAZrB,EAqBEC,QAAUC,IAAMC,YArBlB,EAuBEC,UAvBF,uCAuBc,WAAOC,GAAP,6BAAAC,EAAA,6DACV,EAAKC,SAAS,CACZR,gBAAgB,IAFR,kBAKeS,MAAM,8CAAD,OACoBH,IANxC,cAKFI,EALE,gBAQWA,EAASC,OARpB,OAQFC,EARE,OAUAnB,EAA0CmB,EAA1CnB,KAAME,EAAoCiB,EAApCjB,SAAUC,EAA0BgB,EAA1BhB,MAAOF,EAAmBkB,EAAnBlB,MAAOG,EAAYe,EAAZf,QAC9BE,EAASa,EAAKd,QAAdC,KAER,EAAKS,SACH,CACEf,OACAE,WACAC,QACAF,QACAG,UACAE,SAEF,WACM,EAAKG,QAAQW,SACf,EAAKX,QAAQW,QAAQC,eAAe,CAClCrB,OACAE,WACAC,QACAF,QACAG,UACAE,YA9BA,kDAoCRgB,QAAQC,IAAI,0FApCJ,yBAsCR,EAAKR,SAAS,CACZR,gBAAgB,IAvCV,6EAvBd,8GAeYiB,EAAKC,GACb,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,iBAAiB,QAAQ,kBAAMH,EAASC,EAAOG,WACtDH,EAAOI,cAAcN,KAlBzB,0CAmEuB,IACXX,EAAOkB,KAAKC,MAAMC,MAAMC,OAAxBrB,GACRkB,KAAKnB,UAAUC,KArEnB,+BAwEY,IAAD,SA0D0DkB,KAAKhC,MAA9DC,EA1DD,EA0DCA,KAAMC,EA1DP,EA0DOA,MAAOC,EA1Dd,EA0DcA,SAAUC,EA1DxB,EA0DwBA,MAAOC,EA1D/B,EA0D+BA,QAASC,EA1DxC,EA0DwCA,QAASC,EA1DjD,EA0DiDA,KAExD,OAAOyB,KAAKhC,MAAMQ,eAChB,cAAC,IAAD,CACE4B,MAAO,CACLC,QAAS,OACTC,WAAY,SACZC,eAAgB,YAIpB,qCACE,eAAC,IAAD,CACED,WAAW,SACXE,YAAY,EACZC,UAAU,2BAHZ,UAKE,cAAC,IAAD,CAAQC,KAAM,GAAIC,SAAKC,EAAWC,KAAM,cAAC,IAAD,MACxC,sBAAKJ,UAAU,uBAAf,UACE,cAAC,IAAD,CACEK,SAtDc,SAACC,GACvB,IAAMC,EAAM,YACa,cAArBD,EAAKE,KAAKC,OAIW,SAArBH,EAAKE,KAAKC,SACZ,EAAKC,UAAUJ,EAAKE,KAAKG,eAAe,SAACC,GAAD,OACtC,EAAKrC,SAAS,CACZsC,UAAWD,OAGfE,IAAQC,QAAQ,CAAEC,QAAS,YAAaT,MAAKU,SAAU,OATvDH,IAAQI,QAAQ,CAAEF,QAAS,eAAgBT,MAAKU,SAAU,OAoDpDE,gBAAgB,EAChBC,OAAQ7B,KAAKjC,eAHf,SAKE,cAAC,IAAD,CAAQ+D,KAAK,UAAb,6BAEF,cAAC,IAAD,CAAQrB,UAAU,OAAOsB,QA5CV,WACrB,EAAK/C,SAAS,CACZsC,UAAW,MA0CP,0BAKJ,qBAAKb,UAAU,OAAf,SACE,cAAC,IAAD,CACExC,KAAK,mBACL+D,OAAO,WACPC,SA5FS,SAACC,GAChB,IAAMlB,EAAM,YACZO,IAAQI,QAAQ,CAAEF,QAAS,cAAeT,QAC1CmB,YAAW,WACT,EAAKnD,SAAS,CACZf,KAAMiE,EAAOjE,KACbC,MAAOgE,EAAOhE,MACdkE,SAAUF,EAAOE,SACjBC,YAAaH,EAAOG,YACpBC,YAAaJ,EAAOI,YACpBjE,QAAS6D,EAAO7D,QAChBC,QAAS4D,EAAO5D,QAChBC,KAAM2D,EAAO3D,KACbgE,SAAUL,EAAOK,WAEnBhB,IAAQC,QAAQ,CAAEC,QAAS,QAAST,MAAKU,SAAU,MAClD,MA6EGc,cAAe,CACbvE,KAAMA,EACNC,MAAOA,EACPC,SAAUA,EACVC,MAAOA,EACPC,QAASA,EACTC,QAASA,EACTC,KAAMA,GAERkE,IAAKzC,KAAKtB,QACVgE,eApFe,SAACC,GACtBpD,QAAQC,IAAI,UAAWmD,IAqEnB,SAgBE,cAAC,IAAD,UACE,eAAC,IAAD,CAAKC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAjC,UACE,eAAC,IAAD,CAAKC,OAAQC,IAAb,UACE,cAAC,IAAD,CAAKL,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CACEC,MAAM,OACNlF,KAAK,OACLmF,MAAO,CACL,CACEC,UAAU,EACV9B,QAAS,4BANf,SAUE,cAAC,IAAD,QAGJ,cAAC,IAAD,CAAKqB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CACEC,MAAM,WACNlF,KAAK,WACLmF,MAAO,CACL,CACEC,UAAU,EACV9B,QAAS,gCANf,SAUE,cAAC,IAAD,QAGJ,cAAC,IAAD,CAAKqB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CACEC,MAAM,QACNlF,KAAK,QACLmF,MAAO,CACL,CACEC,UAAU,EACVvB,KAAM,QACNP,QAAS,gCAPf,SAWE,cAAC,IAAD,QAGJ,cAAC,IAAD,CAAKqB,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CAAWC,MAAM,QAAQlF,KAAK,QAA9B,SACE,cAAC,IAAD,QAGJ,cAAC,IAAD,CAAK2E,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CAAWC,MAAM,UAAUlF,KAAK,UAAhC,SACE,cAAC,IAAD,QAGJ,cAAC,IAAD,CAAK2E,GAAI,GAAIC,GAAI,GAAIC,GAAI,GAAzB,SACE,cAAC,IAAKI,KAAN,CAAWC,MAAM,OAAOlF,KAAK,OAA7B,SACE,cAAC,IAAD,WAIN,cAAC,IAAD,CACE6D,KAAK,UACLwB,SAAS,SACTC,SAAUvD,KAAKhC,MAAMS,gBACrBsD,QA9HS,WACrB,EAAK/C,SAAS,CACZP,iBAAiB,IAEnB0D,YAAW,WACT,EAAKnD,SAAS,CACZP,iBAAiB,IAEnB,EAAKwB,MAAMuD,QAAQC,KAAnB,UAA2BC,IAA3B,iBACC,MAiHO,SAMG1D,KAAKhC,MAAMS,gBACR,kBACA,gCAxPtB,GAAiCkF,aAmQlB7F","file":"static/js/16.95dea55a.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport {\r\n  Form,\r\n  Avatar,\r\n  Button,\r\n  Input,\r\n  Row,\r\n  Col,\r\n  message,\r\n  Upload,\r\n  Spin,\r\n} from 'antd';\r\nimport { UserOutlined } from '@ant-design/icons';\r\nimport { ROW_GUTTER } from 'constants/ThemeConstant';\r\nimport Flex from 'components/shared-components/Flex';\r\nimport { APP_PREFIX_PATH } from 'configs/AppConfig';\r\n\r\nexport class EditProfile extends Component {\r\n  avatarEndpoint = 'https://www.mocky.io/v2/5cc8019d300000980a055e76';\r\n\r\n  state = {\r\n    name: '',\r\n    email: '',\r\n    username: '',\r\n    phone: '',\r\n    website: '',\r\n    address: '',\r\n    city: '',\r\n    getDataLoading: false,\r\n    sendDataLoading: false,\r\n  };\r\n\r\n  getBase64(img, callback) {\r\n    const reader = new FileReader();\r\n    reader.addEventListener('load', () => callback(reader.result));\r\n    reader.readAsDataURL(img);\r\n  }\r\n\r\n  formRef = React.createRef();\r\n\r\n  fetchUser = async (id) => {\r\n    this.setState({\r\n      getDataLoading: true,\r\n    });\r\n    try {\r\n      const response = await fetch(\r\n        `https://jsonplaceholder.typicode.com/users/${id}`\r\n      );\r\n      const data = await response.json();\r\n\r\n      const { name, username, phone, email, website } = data;\r\n      const { city } = data.address;\r\n\r\n      this.setState(\r\n        {\r\n          name,\r\n          username,\r\n          phone,\r\n          email,\r\n          website,\r\n          city,\r\n        },\r\n        () => {\r\n          if (this.formRef.current) {\r\n            this.formRef.current.setFieldsValue({\r\n              name,\r\n              username,\r\n              phone,\r\n              email,\r\n              website,\r\n              city,\r\n            });\r\n          }\r\n        }\r\n      );\r\n    } catch (error) {\r\n      console.log('Возникла ошибка!');\r\n    } finally {\r\n      this.setState({\r\n        getDataLoading: false,\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { id } = this.props.match.params;\r\n    this.fetchUser(id);\r\n  }\r\n\r\n  render() {\r\n    const onFinish = (values) => {\r\n      const key = 'updatable';\r\n      message.loading({ content: 'Updating...', key });\r\n      setTimeout(() => {\r\n        this.setState({\r\n          name: values.name,\r\n          email: values.email,\r\n          userName: values.userName,\r\n          dateOfBirth: values.dateOfBirth,\r\n          phoneNumber: values.phoneNumber,\r\n          website: values.website,\r\n          address: values.address,\r\n          city: values.city,\r\n          postcode: values.postcode,\r\n        });\r\n        message.success({ content: 'Done!', key, duration: 2 });\r\n      }, 1000);\r\n    };\r\n\r\n    const onFinishFailed = (errorInfo) => {\r\n      console.log('Failed:', errorInfo);\r\n    };\r\n\r\n    const onUploadAavater = (info) => {\r\n      const key = 'updatable';\r\n      if (info.file.status === 'uploading') {\r\n        message.loading({ content: 'Uploading...', key, duration: 1000 });\r\n        return;\r\n      }\r\n      if (info.file.status === 'done') {\r\n        this.getBase64(info.file.originFileObj, (imageUrl) =>\r\n          this.setState({\r\n            avatarUrl: imageUrl,\r\n          })\r\n        );\r\n        message.success({ content: 'Uploaded!', key, duration: 1.5 });\r\n      }\r\n    };\r\n\r\n    const onRemoveAvater = () => {\r\n      this.setState({\r\n        avatarUrl: '',\r\n      });\r\n    };\r\n\r\n    const handleSendData = () => {\r\n      this.setState({\r\n        sendDataLoading: true,\r\n      });\r\n      setTimeout(() => {\r\n        this.setState({\r\n          sendDataLoading: false,\r\n        });\r\n        this.props.history.push(`${APP_PREFIX_PATH}/user-list`);\r\n      }, 2000);\r\n    };\r\n\r\n    const { name, email, username, phone, website, address, city } = this.state;\r\n\r\n    return this.state.getDataLoading ? (\r\n      <Spin\r\n        style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n        }}\r\n      />\r\n    ) : (\r\n      <>\r\n        <Flex\r\n          alignItems=\"center\"\r\n          mobileFlex={false}\r\n          className=\"text-center text-md-left\"\r\n        >\r\n          <Avatar size={90} src={undefined} icon={<UserOutlined />} />\r\n          <div className=\"ml-md-3 mt-md-0 mt-3\">\r\n            <Upload\r\n              onChange={onUploadAavater}\r\n              showUploadList={false}\r\n              action={this.avatarEndpoint}\r\n            >\r\n              <Button type=\"primary\">Change Avatar</Button>\r\n            </Upload>\r\n            <Button className=\"ml-2\" onClick={onRemoveAvater}>\r\n              Remove\r\n            </Button>\r\n          </div>\r\n        </Flex>\r\n        <div className=\"mt-4\">\r\n          <Form\r\n            name=\"basicInformation\"\r\n            layout=\"vertical\"\r\n            onFinish={onFinish}\r\n            initialValues={{\r\n              name: name,\r\n              email: email,\r\n              username: username,\r\n              phone: phone,\r\n              website: website,\r\n              address: address,\r\n              city: city,\r\n            }}\r\n            ref={this.formRef}\r\n            onFinishFailed={onFinishFailed}\r\n          >\r\n            <Row>\r\n              <Col xs={24} sm={24} md={24} lg={16}>\r\n                <Row gutter={ROW_GUTTER}>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item\r\n                      label=\"Name\"\r\n                      name=\"name\"\r\n                      rules={[\r\n                        {\r\n                          required: true,\r\n                          message: 'Please input your name!',\r\n                        },\r\n                      ]}\r\n                    >\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item\r\n                      label=\"Username\"\r\n                      name=\"username\"\r\n                      rules={[\r\n                        {\r\n                          required: true,\r\n                          message: 'Please input your username!',\r\n                        },\r\n                      ]}\r\n                    >\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item\r\n                      label=\"Email\"\r\n                      name=\"email\"\r\n                      rules={[\r\n                        {\r\n                          required: true,\r\n                          type: 'email',\r\n                          message: 'Please enter a valid email!',\r\n                        },\r\n                      ]}\r\n                    >\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item label=\"Phone\" name=\"phone\">\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item label=\"Website\" name=\"website\">\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                  <Col xs={24} sm={24} md={12}>\r\n                    <Form.Item label=\"City\" name=\"city\">\r\n                      <Input />\r\n                    </Form.Item>\r\n                  </Col>\r\n                </Row>\r\n                <Button\r\n                  type=\"primary\"\r\n                  htmlType=\"submit\"\r\n                  disabled={this.state.sendDataLoading}\r\n                  onClick={handleSendData}\r\n                >\r\n                  {this.state.sendDataLoading\r\n                    ? 'Data sending...'\r\n                    : 'Save Change'}\r\n                </Button>\r\n              </Col>\r\n            </Row>\r\n          </Form>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditProfile;\r\n"],"sourceRoot":""}